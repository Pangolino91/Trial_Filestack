<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://static.filestackapi.com/v3/filestack.js"></script>
    <link rel="stylesheet" href="css/style.css">
    <title>Filestack</title>
</head>
<body>
  <script src="https://static.filestackapi.com/filestack-js/1.x.x/filestack.min.js"></script>

  <script>
      
      // defining variables 
      const apikey = 'A9ZaZkmYdSYuVVWVsY6q6z';
      const client = filestack.init(apikey);


      // playground

      function playground () {
       var dogs = ['pug', 'labs', 'setters'];
       var multipleSshit = dogs.map(el => el * 3)
       console.log(dogs.toString())
       const imageArray = ['png', 'jpg', 'jpeg', 'svg+xml'];
       if (imageArray.indexOf(('image/pg').split('/')[1]) !== -1) {console.log('vero')}   
      }

      playground();


      window.addEventListener('DOMContentLoaded', function () {
      const options = {
        maxFiles: 5,
        uploadInBackground: false,
        onOpen: () => console.log('opened!'),
        onUploadDone: (res) => {
          console.log(res);
          displayImage(res);
          // client.preview(res.filesUploaded[0].handle)
        },
        onClose: function() {console.log('prova')}
      };
      
      // client.picker(options).open();
      
      displayImage = (res) => {
        var fileData = res.filesUploaded[0]; 

        // fileData.forEach(el => {
        // var newArray = [];
        // var prova = el.mimetype === 'jpeg' ||	'png';
        // newArray.push(prova)
        // console.log(newArray)
        // })

          if (['jpeg', 'png'].indexOf(fileData.mimetype.split('/')[1]) !== -1) {
          const container = document.getElementById('thumbnail-container');
          const thumbnail = document.getElementById('thumbnail') || new Image();
          thumbnail.id = 'thumbnail';
          thumbnail.src = client.transform(fileData.handle, { 
            resize: { 
              width: 200 
            }
          });

          if (!container.contains(thumbnail)) {
            container.appendChild(thumbnail);
          }
        }

      }
    })
      
  </script>
  
  <div id="title">Filestack</div>
      <div id="thumbnail-container">
  </div>


</body>
</html>